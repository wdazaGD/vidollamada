{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../opentok.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = [\"publisherDiv\"];\n\nconst _c1 = function (a0) {\n  return {\n    \"publishing\": a0\n  };\n};\n\nconst publish = () => {};\n\nexport let PublisherComponent = /*#__PURE__*/(() => {\n  class PublisherComponent {\n    constructor(opentokService) {\n      this.opentokService = opentokService;\n      this.publishing = false;\n    }\n\n    ngAfterViewInit() {\n      const OT = this.opentokService.getOT();\n      this.publisher = OT.initPublisher(this.publisherDiv.nativeElement, {\n        insertMode: 'append'\n      });\n\n      if (this.session) {\n        if (this.session['isConnected']()) {\n          this.publish();\n        }\n\n        this.session.on('sessionConnected', () => this.publish());\n      }\n    }\n\n    publish() {\n      this.session.publish(this.publisher, err => {\n        if (err) {\n          alert(err.message);\n        } else {\n          this.publishing = true;\n        }\n      });\n    }\n\n  }\n\n  PublisherComponent.ɵfac = function PublisherComponent_Factory(t) {\n    return new (t || PublisherComponent)(i0.ɵɵdirectiveInject(i1.OpentokService));\n  };\n\n  PublisherComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PublisherComponent,\n    selectors: [[\"app-publisher\"]],\n    viewQuery: function PublisherComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.publisherDiv = _t.first);\n      }\n    },\n    inputs: {\n      session: \"session\"\n    },\n    decls: 2,\n    vars: 3,\n    consts: [[3, \"ngClass\"], [\"publisherDiv\", \"\"]],\n    template: function PublisherComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"div\", 0, 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c1, ctx.publishing));\n      }\n    },\n    dependencies: [i2.NgClass]\n  });\n  return PublisherComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}